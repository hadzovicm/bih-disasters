<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bosnia - Natural Disasters ðŸ‡§ðŸ‡¦</title>
  <link rel="stylesheet" type="text/css" href="styles/main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100%; }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-gradient">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Bosnia and Herzegovina Natural Disasters</a>
      <div class="d-flex">
        <a class="navbar-icon mx-2" href="#"><i class="bi bi-list"></i></a>
        <a class="navbar-icon mx-2" href="#"><i class="bi bi-globe"></i></a>
        <a class="navbar-icon mx-2" href="#"><i class="bi bi-gear-fill"></i></a>
      </div>
    </div>
  </nav>

  <div class="container-fluid vh-100">
    <div class="row h-100">
      <div class="col-lg-3 bg-light d-flex flex-column">
        <h3 class="p-3">Earthquakes in ðŸ‡§ðŸ‡¦</h3>
        <% if (earthquakes.length > 0) { %>
          <ul class="list-unstyled p-3">
            <% earthquakes.forEach(function(earthquake) { %>
              <li>
                <div class="card mb-3">
                  <div class="card-body">
                    <h5 class="card-title">Magnitude: <%= earthquake.properties.mag %></h5>
                    <p class="card-text">
                      <strong>Location:</strong> <%= earthquake.properties.place %> <br>
                      <strong>Date:</strong> <%= new Date(earthquake.properties.time).toLocaleString() %>
                    </p>
                  </div>
                </div>
              </li>
            <% }); %>
          </ul>
        <% } else { %>
          <p>No recent earthquakes in Bosnia and Herzegovina.</p>
        <% } %>
      </div>
      <div class="col-lg-9 p-4">
        
        <div id="map"></div> <!-- Map Container -->
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([44.0, 17.8], 8);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
    }).addTo(map);
    const earthquakeUrl = 'https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson';
    fetch(earthquakeUrl)
      .then(response => response.json())
      .then(data => {
        L.geoJSON(data, {
          pointToLayer: function (feature, latlng) {
            return L.circleMarker(latlng, {
              radius: feature.properties.mag * 2,
              fillColor: "#ff7800",
              color: "#000",
              weight: 1,
              opacity: 1,
              fillOpacity: 0.8
            }).bindPopup(`<strong>Location:</strong> ${feature.properties.place}<br><strong>Magnitude:</strong> ${feature.properties.mag}`);
          }
        }).addTo(map);
      });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>

</html>